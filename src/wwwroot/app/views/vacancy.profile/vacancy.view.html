<div class="secondary-menu grid-block">
   <div class="large-2 grid-block">
      <div class="grid-content">
         <h5 ng-bind="::'VACANCY_PROFILE.VACANCY_PROFILE' | translate"></h5> </div>
   </div>
   <div class="large-7 grid-block"> </div>
   <div class="large-3 grid-block align-right">
      <ul class="menu-bar second-button-bar">
         <li>
            <a ng-click="back()" ng-bind="::'COMMON.BACK' | translate"></a>
         </li>
         <li>
            <a ng-click="edit()" ng-bind="::'COMMON.EDIT' | translate"></a>
         </li>
         <li ng-if="isChanged()">
            <a ng-click="saveAndBack()" ng-bind="::'COMMON.SAVE' | translate"></a>
         </li>
      </ul>
   </div>
</div>
<div class="grid-block">
   <div class="vertical medium-9 grid-block">
      <div class="main-card vacancy-profile">
         <div class="card-divider">
            <h4 ng-bind="vacancy.title"></h4>
         </div>
         <div class="card-section">
            <div class="grid-block">
               <div class="vertical small-4 grid-block">
                  <div> 
                     <i class="fi-graph-bar"></i>
                     <span class="property-title icon-text" ng-bind="::'COMMON.LEVEL' | translate">:</span> 
                     <span ng-bind="vacancy.levels | arrayAsString: 'title'" class="icon-text"></span>
                  </div>
                  <div> 
                     <i class="fi-dollar-bill"></i>
                     <span class="property-title icon-text" ng-bind="::'COMMON.SALARY' | translate">:</span>
                     <span ng-if="vacancy.salaryMin" ng-bind="::'COMMON.FROM' | translate" class="icon-text">:</span> 
                     <span ng-bind="::vacancy.salaryMin" class="icon-text"></span> 
                     <span ng-if="vacancy.salaryMax" ng-bind="::'COMMON.TO' | translate" class="icon-text">:</span> 
                     <span ng-bind="::vacancy.salaryMax" class="icon-text"></span>
                     <span ng-bind="vacancy.convertedCurrency | arrayAsString: 'title'" class="icon-text"></span>
                  </div>
                  <div>
                     <i class="fi-torsos-all"></i>
                     <span class="property-title icon-text" ng-bind="::'COMMON.DEPARTMENT' | translate">:</span> 
                     <span ng-bind="vacancy.departments | arrayAsString: 'title'" class="icon-text"></span> 
                  </div>
               </div>
               <div class="vertical small-4 grid-block">
                  <div> 
                     <i class="fi-results-demographics"></i>
                     <span class="property-title icon-text" ng-bind="::'COMMON.INDUSTRY' | translate">:</span> 
                     <span ng-bind="vacancy.industries | arrayAsString: 'title'" class="icon-text"></span> 
                  </div>
                  <div> 
                     <i class="fi-marker"></i> 
                     <span class="property-title icon-text" ng-bind="::'COMMON.LOCATION' | translate"></span> 
                     <span ng-bind="vacancy.cities | arrayAsString: 'title'" class="icon-text"></span> 
                  </div>
                  <div> 
                     <i class="fi-clock"></i>
                     <span class="property-title icon-text" ng-bind="::'COMMON.TYPE_OF_EMPLOYMENT' | translate">:</span> 
                     <span ng-bind="vacancy.typesOfEmployment | arrayAsString: 'title'" class="icon-text"></span> 
                  </div>
               </div>
               <div class="vertical small-4 grid-block">
                  <div> 
                     <i class="fi-flag"></i>
                     <span class="property-title icon-text" ng-bind="::'COMMON.LANGUAGE' | translate">:</span> 
                     <span ng-bind="vacancy.languageSkill.language.title" class="icon-text"></span> 
                  </div>
                  <div> 
                     <i class="fi-star"></i>
                     <span class="property-title icon-text" ng-bind="::'COMMON.LANGUAGE_LEVEL' | translate">:</span> 
                     <span ng-bind="vacancy.languageSkill.languageLevelObj.title" class="icon-text"></span> 
                  </div>
               </div>
            </div>
            <hr>
            <div class="vertical grid-block">
               <div class="property-title" ng-bind="::'COMMON.DESCRIPTION' | translate">:</div>
               <p class="vacancy-description" ng-bind-html="vacancy.description"></p>
            </div>
         </div>
      </div>
      <div class="main-card vacancy-profile">
         <div class="card-section candidate-vacancy-info-container">
               <h3 ng-if="isVacancyLoaded && isVacancyClosed()">Vacancy closed {{getPassDate()}} by <a ng-click="goToHiredCandidate()">{{getHiredCandidateFullName()}}</a></h3>
               <candidate-vacancy-info ng-if="isVacancyLoaded && !isVacancyClosed()" closevacancy="closeVacancyWith" vacancy-stages="vacancy.stageFlow" vacancy-stage-infos-composed-by-candidate-id-vacancy-id="vacancyStageInfosComposedByCandidateIdVacancyId" parent-entity="vacancy" directive-type="full"
               current-user="currentUser"> </candidate-vacancy-info>
         </div>
      </div>
      <div class="main-card vacancy-profile">
         <div class="card-divider">
            <div class="grid-block">
               <div class="small-6 grid-block" ng-bind="::'COMMON.HISTORY' | translate"> </div>
            </div>
         </div>
         <hr>
         <div ng-if="isVacancyLoaded" class="card-section"> 
            <table>
               <thead>
                  <tr>
                     <th ng-bind="::'COMMON.DATE' | translate"></th>
                     <th ng-bind="::'COMMON.USER' | translate"></th>
                     <th ng-bind="::'COMMON.FIELD' | translate"></th>
                     <th ng-bind="::'COMMON.PAST_VALUE' | translate"></th>
                     <th ng-bind="::'COMMON.NEW_VALUE' | translate"></th>
                  </tr>
               </thead>
               <tbody>
                  <tr class="history-tds" ng-repeat="log in convertedHistory | orderBy : '-createdOn' track by $index ">
                     <td class="date-td" ng-bind="log.createdOn | date : 'dd-MM-yy H:mm'">
                     </td>
                     <td ng-bind="log.user">
                     </td>
                     <td ng-bind="log.field | fieldName">
                     </td>
                     <td ng-bind="log.pastValue | date : 'dd-MM-yy' | shorten">
                     </td>
                     <td ng-bind="log.newValue | date : 'dd-MM-yy' | shorten">
                     </td>
                  </tr>
               </tbody>
            </table>
         </div>
      </div>
   </div>
   <div class="medium-3 grid-block vertical-sidebar">
      <div class="vertical medium-horizontal grid-block vacancy-view">
         <div class="sidebar">
            <div class="card-divider" ng-bind="::'VACANCY_PROFILE.INFORMATION' | translate"> </div>
            <div class="sidebar-content">
               <div class="grid-block sidebar-row">
                  <div class="medium-4 grid-block sidebar-col" ng-bind="::'COMMON.RESPONSIBLE' | translate">: </div>
                  <div class="medium-8 grid-block">
                     <oi-select class="multiple-select responsible-select" oi-options="responsible.id as responsible.lastName + ' ' + responsible.firstName for responsible in searchResponsible($query) | orderBy : 'lastName+ \'|\' + firstName'" ng-model="vacancy.responsibleId" oi-select-options="{ cleanModel: true }" placeholder="{{::'COMMON.RESPONSIBLE' | translate}}" name="vacancyResponsible"></oi-select>
                  </div>
               </div>
               <div class="grid-block sidebar-row">
                  <div class="medium-4 grid-block sidebar-col" ng-bind="::'COMMON.START_DATE' | translate">: </div>
                  <div class="medium-8 grid-block ">
                     <input type="text" placeholder="{{::'COMMON.START_DATE' | translate}}" class="input-date" ng-model="vacancy.startDate" datetime-picker date-format="dd-MM-yyyy" close-on-select="true" date-only/> </div>
               </div>
               <div class="grid-block sidebar-row">
                  <div class="medium-4 grid-block sidebar-col" ng-bind="::'COMMON.DEADLINE_DATE' | translate">: </div>
                  <div class="medium-8 grid-block ">
                     <input type="text" placeholder="{{::'COMMON.DEADLINE_DATE' | translate}}" class="input-date" ng-model="vacancy.deadlineDate" datetime-picker date-format="dd-MM-yyyy" close-on-select="true" date-only/> </div>
               </div>
               <div class="grid-block sidebar-row">
                  <div class="medium-4 grid-block sidebar-col" ng-bind="::'COMMON.END_DATE' | translate">: </div>
                  <div class="medium-8 grid-block">
                     <input type="text" placeholder="{{::'COMMON.END_DATE' | translate}}" class="input-date" ng-model="vacancy.endDate" datetime-picker date-format="dd-MM-yyyy" close-on-select="true" date-only/> </div>
               </div>
            </div>
         </div>
         <div class="sidebar">
            <div class="card-divider" ng-bind="::'CANDIDATES.CANDIDATES' | translate"> </div>
            <div class="sidebar-content">
               <ul class="some-change">
                  <li>
                     <input name="newCandidate" id="newCandidate" checked="" type="radio" ng-click="goToCandidate()">
                     <label for="newCandidate" ng-bind="::'COMMON.NEW' | translate"></label>
                  </li>
                  <li>
                     <input name="candidateFromBOT" id="candidateFromBOT" type="radio" ng-click="goToCandidates()">
                     <label for="candidateFromBOT" ng-bind="::'COMMON.FROM_BOT' | translate"></label>
                  </li>
               </ul>
               <section class="block-list">
               </section>
            </div>
         </div>
         <div class="sidebar">
            <comments comments="comments" save="saveComment" remove="removeComment" type="comment"></comments>
         </div>
         <div class="sidebar">
            <div class="card-divider" ng-bind="::'VACANCY_PROFILE.FILES' | translate"> </div>
            <div class="sidebar-content">
               <fieldset class="file-upload">
                  <input type="file" nv-file-select="" multiple uploader="uploader">
                  <table class="upload-table" ng-hide="!vacancy.files.length">
                     <caption ng-bind="::'COMMON.ADDED_FILES' | translate">:</caption>
                     <thead>
                        <tr>
                           <th>№</th>
                           <th ng-bind-html="::'COMMON.NAME' | translate"></th>
                           <th ng-bind="::'COMMON.SIZE' | translate"></th>
                           <th></th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr ng-repeat="item in vacancy.files">
                           <td>{{$index+1}}</td>
                           <td>
                              <a target="_blank" href="{{item.filePath | botUrl}}" ng-bind="item.description"></a>
                           </td>
                           <td ng-bind="item.fileSize"></td>
                           <td><a class="remove-item" ng-click="addFilesForRemove(item)"><i class="foundicon-remove general-icon"></i></a></td>
                        </tr>
                     </tbody>
                  </table>
                  <table class="upload-table" ng-hide="!uploader.queue">
                     <caption ng-bind="::'COMMON.FILES_TO_UPLOAD' | translate">:</caption>
                     <thead>
                        <tr>
                           <th>№</th>
                           <th ng-bind="::'COMMON.NAME' | translate"></th>
                           <th ng-bind="::'COMMON.SIZE' | translate"></th>
                           <th></th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr ng-repeat="item in uploader.queue">
                           <td>{{$index+1}}</td>
                           <td ng-bind="item.file.name"></td>
                           <td ng-bind="item.file.size"></td>
                           <td><a class="remove-item" ng-click="item.remove()"><i class="foundicon-remove general-icon"></i></a></td>
                        </tr>
                     </tbody>
                  </table>
               </fieldset>
            </div>
         </div>
      </div>
   </div>
</div>