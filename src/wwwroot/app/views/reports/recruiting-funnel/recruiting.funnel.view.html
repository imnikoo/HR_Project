<div class="grid-block">
   <div class="medium-2 grid-block">
      <div class="sidebar report-sidebar">
         <div class="card-divider">
            <div class="grid-block">
               <div class="medium-8 grid-block" ng-bind="::'REPORTS.REPORT_CONDITIONS' | translate"></div>
               <div class="medium-4 grid-block align-right">
                  <a ng-click="clear()" ng-bind="::'COMMON.CLEAR' | translate"></a>
               </div>
            </div>
         </div>
         <div class="card-section">
            <form>
               <label for="Vacancy" ng-bind="::'VACANCY.VACANCY' | translate"></label>
               <oi-select ng-change="genereteReportForSelectedVacancy(selectedVacancyId)" ng-model="selectedVacancyId" class="multiple-select" id="Vacancy"  oi-options="vacancy.id as (vacancy.title | highlight : 'primary-font-color')+' '+(vacancy.departments | arrayAsString: 'title')+' '+((vacancy.cities | arrayAsString: 'title') || '') for vacancy in autocomplete($query, selectedVacancyId)" oi-select-options="{ cleanModel: true }" placeholder="{{::'VACANCY.VACANCY' | translate}}">
               </oi-select>
               <div class="grid-block">
                  <label ng-bind="::'THESAURUSES.STAGES' | translate"></label>
               </div>
               <div class="vertical grid-block">
                  <div class="stage-button" ng-click="stageSwitch(stage)" ng-repeat="stage in stages  | orderBy:'$index':true" ng-class="{'pressed': stage._isPressed}"> <span class='stage-button-text' ng-bind="stage.title"></span> </div>
               </div>
            </form>
         </div>
      </div>
   </div>
   <div class="vertical medium-10 grid-block">
      <div class="main-card">
         <div class="card-divider"> <span ng-bind="::'REPORTS.RECRUITING_FUNNEL' | translate"></span> <span ng-bind="::'COMMON.FOR' | translate"></span> <span><a ng-click="viewVacancy()" ng-bind="selectedVacancy.title"></a></span> </div>
         <div class="card-section funnel-container">
            <div id="funnel">
            </div>
         </div>
      </div>
      <div class="main-card">
         <div class="card-divider"> <span ng-bind="::'REPORTS.CANDIDATES_ATTACHED_TO_VACANCY' | translate"></span> <span><a ng-click="viewVacancy()" ng-bind="selectedVacancy.title"></a></span> </div>
         <div class="card-section">
            <table class="report-data">
               <thead>
                  <tr class="report-data-row">
                     <th ng-bind="stage.title" class="stages-column" ng-if="selectedStageIds.includes(stage.id)" ng-repeat="stage in stages | orderBy:'$index':true">
                        <p class="title-stage"></p>
                     </th>
                  </tr>
                  <tr class="report-data-row">
                     <th ng-bind="candidatesGropedByStage[stage.id].length || 0" class="funnel-report-column" ng-if="selectedStageIds.includes(stage.id)" ng-repeat="stage in stages | orderBy:'$index':true"> </th>
                  </tr>
               </thead>
               <tbody>
                  <tr class="report-data-row" ng-repeat="x in tableRows">
                     <td class="stages-column" ng-if="selectedStageIds.includes(stage.id)" ng-repeat="stage in stages | orderBy:'$index':true">
                        <a ng-click="viewCandidate(candidatesGropedByStage[stage.id][x].candidate)" ng-bind="filterCandidatesGropedByStageByCandidateId(candidatesGropedByStage[stage.id], x)"></a>
                     </td>
                  </tr>
               </tbody>
            </table>
         </div>
      </div>
   </div>
</div>